<%= render "shared/navbar" %>

<div class="container mt-5">
  <h2 class="mb-4">Sélectionne tes activités</h2>

  <% @categories.each do |category| %>
    <h3 class="mt-5"><%= category.name %></h3>

    <div class="swipe-carousel" data-controller="swipe">
      <div class="swipe-carousel__track" data-swipe-target="track" role="region" aria-label="<%= category.name %>">
        <% category.activities.each do |activity| %>
          <div class="card h-100">
            <% if activity.photo.attached? %>
              <%= image_tag activity.photo.variant(resize_to_fill: [600, 300]).processed, class: "card-img-top" %>
            <% else %>
              <%= image_tag "placeholder.svg", class: "card-img-top" %>
            <% end %>

            <div class="card-body">
              <h5 class="card-title mb-1"><b><%= activity.name %></b></h5>
              <p class="card-text"><%= activity.description %></p>

              <!-- bouton pour ajouter l'activité au trip -->
              <%= button_to "Ajouter à mon trip",
                  trip_trip_activities_path(@trip, activity_id: activity.id),
                  method: :post,
                  class: "btn btn-primary" %>
            </div>

            <div class="card-footer bg-transparent">
              <p class="mb-1"><%= activity.address %></p>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
